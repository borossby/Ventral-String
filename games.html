<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ventral String Â· Games</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="top-bar">
        <button class="menu-button" type="button" data-menu-toggle aria-expanded="false" aria-controls="sidebar" aria-label="Toggle navigation">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <span class="brand">Ventral String</span>
        <div class="status-indicator">
            <span class="status-dot" aria-hidden="true"></span>
            <span class="status-text">v4.0.0</span>
        </div>
    </header>

    <aside class="sidebar" id="sidebar" aria-label="Primary navigation">
        <nav class="sidebar__content">
            <h2>Navigation</h2>
            <ul>
                <li><a href="games.html">Games</a></li>
                <li><a href="apps.html">Apps</a></li>
                <li><a href="media.html">Media</a></li>
                <li><a href="settings.html">Settings</a></li>
            </ul>
        </nav>
    </aside>

    <main class="welcome page-layout">
        <div class="page-content">
            <h1 class="page-title">Games</h1>
            <form class="page-search" role="search" data-search-form>
                <label class="sr-only" for="games-search">Search this page</label>
                <input id="games-search" type="search" name="q" placeholder="Search this page!" autocomplete="off" data-search-input>
                <span class="page-search__divider" aria-hidden="true"></span>
                <button type="submit" class="page-search__button" aria-label="Submit search">
                    <span class="page-search__icon" aria-hidden="true"></span>
                </button>
            </form>
            <div class="game-shelf">
                <a class="game-tile" href="Games/poor-bunny.html" data-game-title="Poor Bunny">
                    <img src="Images/poorbunny.png" alt="Poor Bunny cover art">
                    <span class="game-tile__label">Poor Bunny</span>
                </a>
                <a class="game-tile" href="Games/monkey-mart.html" data-game-title="Monkey Mart">
                    <img src="Images/monkeymart.png" alt="Monkey Mart cover art">
                    <span class="game-tile__label">Monkey Mart</span>
                </a>
                <a class="game-tile" href="Games/space-waves.html" data-game-title="Space Waves">
                    <img src="Images/spacewaves.png" alt="Space Waves cover art">
                    <span class="game-tile__label">Space Waves</span>
                </a>
                <a class="game-tile" href="Games/retro-bowl.html" data-game-title="Retro Bowl">
                    <img src="Images/retrobowl.png" alt="Retro Bowl cover art">
                    <span class="game-tile__label">Retro Bowl</span>
                </a>
                <a class="game-tile" href="Games/bike-obby.html" data-game-title="Bike Obby">
                    <img src="Images/bikeobby.png" alt="Bike Obby cover art">
                    <span class="game-tile__label">Bike Obby</span>
                </a>
                <a class="game-tile" href="Games/hollow-knight.html" data-game-title="Hollow Knight">
                    <img src="Images/hollowknight.png" alt="Hollow Knight cover art">
                    <span class="game-tile__label">Hollow Knight</span>
                </a>
                <a class="game-tile" href="Games/chess.html" data-game-title="Chess">
                    <img src="Images/chess.png" alt="Chess cover art">
                    <span class="game-tile__label">Chess</span>
                </a>
                <a class="game-tile" href="Games/gladihoppers.html" data-game-title="Gladihoppers">
                    <img src="Images/gladihoppers.png" alt="Gladihoppers cover art">
                    <span class="game-tile__label">Gladihoppers</span>
                </a>
                <a class="game-tile" href="Games/stick-archers-battle.html" data-game-title="Stick Archers Battle">
                    <img src="Images/stickarchers.png" alt="Stick Archers Battle cover art">
                    <span class="game-tile__label">Stick Archers Battle</span>
                </a>
            </div>
        </div>
    </main>
    <script src="time.js"></script>
    <script>
        (function () {
            const searchForm = document.querySelector('[data-search-form]');
            const searchInput = document.querySelector('[data-search-input]');
            const shelf = document.querySelector('.game-shelf');
            const tiles = Array.from(document.querySelectorAll('.game-tile'));

            if (!searchInput || tiles.length === 0 || !shelf) {
                return;
            }

            searchForm?.addEventListener('submit', (event) => {
                event.preventDefault();
            });

            function applyFilter(value) {
                const query = value.trim().toLowerCase();
                let anyVisible = false;

                tiles.forEach((tile) => {
                    const title = (tile.dataset.gameTitle || '').toLowerCase();
                    const matches = !query || (title && title.includes(query));

                    if (matches) {
                        if (tile._hideTimeout) {
                            clearTimeout(tile._hideTimeout);
                            tile._hideTimeout = null;
                        }
                        const wasHidden = tile.hasAttribute('hidden');
                        if (wasHidden) {
                            tile.removeAttribute('hidden');
                            tile.classList.add('game-tile--hidden');
                            requestAnimationFrame(() => {
                                tile.classList.remove('game-tile--hidden');
                            });
                        } else {
                            tile.classList.remove('game-tile--hidden');
                        }
                        anyVisible = true;
                    } else {
                        if (!tile.hasAttribute('hidden') && !tile._hideTimeout) {
                            tile.classList.add('game-tile--hidden');
                            tile._hideTimeout = setTimeout(() => {
                                if (!tile.classList.contains('game-tile--hidden')) {
                                    return;
                                }
                                tile.setAttribute('hidden', '');
                                tile.classList.remove('game-tile--hidden');
                                tile._hideTimeout = null;
                            }, 280);
                        }
                    }
                });

                shelf.classList.toggle('game-shelf--filtering', Boolean(query));

                if (!anyVisible && query) {
                    shelf.classList.add('game-shelf--empty');
                } else {
                    shelf.classList.remove('game-shelf--empty');
                }
            }

            searchInput.addEventListener('input', (event) => {
                applyFilter(event.target.value);
            });
        })();
    </script>
</body>
</html>
